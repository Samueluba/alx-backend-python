#!/bin/bash

SCRIPT_PATH="messaging_app/kurbeScript"

# Check if script exists and is not empty
echo "ğŸ” Checking if $SCRIPT_PATH exists and is not empty..."
if [[ ! -f "$SCRIPT_PATH" ]]; then
    echo "âŒ File $SCRIPT_PATH does not exist."
    exit 1
fi

if [[ ! -s "$SCRIPT_PATH" ]]; then
    echo "âŒ File $SCRIPT_PATH is empty."
    exit 1
fi
echo "âœ… $SCRIPT_PATH exists and is not empty."

# Check for Minikube installation check
echo "ğŸ” Checking for Minikube installation check..."
if grep -qE 'command -v.*minikube' "$SCRIPT_PATH"; then
    echo "âœ… Script checks if Minikube is installed."
else
    echo "âŒ Script does not check for Minikube installation."
fi

# Check for starting Kubernetes cluster
echo "ğŸ” Checking if script starts a Kubernetes cluster..."
if grep -q 'minikube start' "$SCRIPT_PATH"; then
    echo "âœ… Script starts a Kubernetes cluster with Minikube."
else
    echo "âŒ Script does not start a Kubernetes cluster."
fi

# Check for kubectl cluster-info
echo "ğŸ” Checking for cluster verification with kubectl..."
if grep -q 'kubectl cluster-info' "$SCRIPT_PATH"; then
    echo "âœ… Script verifies the cluster with kubectl cluster-info."
else
    echo "âŒ Script does not verify the cluster with kubectl cluster-info."
fi

# Check for kubectl get pods
echo "ğŸ” Checking if script retrieves pods..."
if grep -q 'kubectl get pods' "$SCRIPT_PATH"; then
    echo "âœ… Script retrieves available pods using kubectl get pods."
else
    echo "âŒ Script does not retrieve pods."
fi
